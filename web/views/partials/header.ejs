<!-- STICKY NAVBAR -->
<div class="sticky top-0 z-50 backdrop-blur bg-base-300/80 border-b border-base-content/10">
    <div class="navbar h-20 w-full max-w-7xl mx-auto px-3 sm:px-4">

        <!-- LEFT / LOGO -->
        <div class="navbar-start">
            <a href="/" class="flex items-center gap-2">
                <div class="shrink-0 w-8 h-8 sm:w-12 sm:h-12">
                    <img src="/assets/logo.png" alt="Surakshya Cloud Logo" class="w-full h-full object-cover rounded">
                </div>
                <span class="text-xl sm:text-2xl font-semibold uppercase
          bg-linear-to-r from-red-500 via-rose-500 to-pink-500
          text-transparent bg-clip-text">
                    Surakshya Cloud
                </span>
            </a>
        </div>

        <!-- RIGHT -->
        <div class="navbar-end gap-2">

            <!-- MOBILE MENU -->
            <div class="dropdown dropdown-end lg:hidden">
                <label tabindex="0" class="btn btn-ghost">
                    <i class="fa-solid fa-bars text-lg"></i>
                </label>

                <ul tabindex="0" class="menu menu-sm dropdown-content mt-3 w-52 rounded-box
                   bg-base-100 shadow z-50">

                    <% headerMenu.forEach(item=> { %>
                        <li>
                            <a href="<%= item.url %>" class="<%= currentPath === item.url ? 'bg-accent' : '' %>">
                                <%= item.label %>
                            </a>
                        </li>
                        <% }) %>

                            <% if (user) { %>
                                <div class="divider"></div>
                                <li>
                                    <form action="/logout" method="POST">
                                        <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                                        <button type="submit" class="text-error w-full text-left">
                                            <i class="fa-solid fa-arrow-right-from-bracket"></i>
                                            Logout
                                        </button>
                                    </form>
                                </li>
                                <% } %>

                </ul>
            </div>

            <!-- DESKTOP MENU -->
            <ul class="menu menu-horizontal items-center hidden lg:flex gap-1">

                <% headerMenu.forEach(item=> { %>

                    <% if (item.label==='Profile' && user) { %>
                        <li>
                            <div class="dropdown dropdown-end">
                                <label tabindex="0" class="btn btn-ghost btn-circle avatar">
                                    <div class="w-9 rounded-full bg-primary text-primary-content
                              flex items-center justify-center font-semibold">
                                        <%= user.username?.charAt(0).toUpperCase() %>
                                    </div>
                                </label>

                                <ul tabindex="0" class="menu dropdown-content mt-3 w-52 rounded-box
                           bg-base-100 shadow-lg z-50 p-2">

                                    <!-- User Info -->
                                    <li class="menu-title px-4 py-3 border-b border-base-300">
                                        <div class="flex flex-col gap-1">
                                            <span class="text-xs text-base-content/60">
                                                Signed in as
                                            </span>
                                            <span class="text-sm font-semibold truncate">
                                                <%= user.email %>
                                            </span>
                                        </div>
                                    </li>

                                    <!-- Role -->
                                    <li class="px-4 py-1">
                                        <div class="flex justify-between text-xs">
                                            <span>Role</span>
                                            <span class="badge badge-primary badge-sm">
                                                <%= user.role %>
                                            </span>
                                        </div>
                                    </li>

                                    <div class="divider"></div>

                                    <!-- Profile -->
                                    <li>
                                        <a href="/profile" class="text-sm">
                                            <i class="fa-solid fa-user"></i>
                                            View Profile
                                        </a>
                                    </li>

                                    <!-- LOGOUT (POST) -->
                                    <li>
                                        <form action="/logout" method="POST">
                                            <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                                            <button type="submit" class="text-sm text-error w-full text-left">
                                                <i class="fa-solid fa-arrow-right-from-bracket"></i>
                                                Logout
                                            </button>
                                        </form>
                                    </li>

                                </ul>
                            </div>
                        </li>

                        <% } else { %>
                            <li>
                                <a href="<%= item.url %>" class="<%= currentPath === item.url ? 'bg-accent' : '' %>">
                                    <%= item.label %>
                                </a>
                            </li>
                            <% } %>

                                <% }) %>

            </ul>
        </div>
    </div>
</div>